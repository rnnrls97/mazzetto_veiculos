"use strict";var e=require("fs"),t=require("purgecss"),r=require("rollup-pluginutils");function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var u=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,u.get?u:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n=u(e);module.exports=function(e){const u=r.createFilter(e.include||["**/*.css"],e.exclude||"node_modules/**"),s=[];let i="";return{name:"purgecss",transform:async(r,n)=>{if(!u(n))return null;let i=(await(new t.PurgeCSS).purge({content:e.content,css:[{raw:r}]}))[0].css;return s.push(i),i=JSON.stringify(i),e.insert||(r=e.output?'"";':i),{code:`export default ${r}`,map:{mappings:""}}},generateBundle(){if(!(e.insert||s.length&&!1!==e.output))return;const t=s.reduce(((e,t)=>e+t),"");return"string"==typeof e.output?n.writeFileSync(e.output,t):"function"==typeof e.output?e.output(t,s):!e.insert&&i?((i.endsWith(".js")||i.endsWith(".ts"))&&(i=i.slice(0,-3)),i=`${i}.css`,n.writeFileSync(i,t)):void 0}}};
